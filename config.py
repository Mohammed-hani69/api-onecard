"""
ملف التكوين للتطبيق
يحتوي على بيانات الاتصال بـ API وكل إعدادات التطبيق
"""

import hashlib
import os
from datetime import datetime

# ==================== بيانات الاتصال بـ API ====================
# بيانات الاعتماد الخاصة بك
RESELLER_USERNAME = "business@es-gift.com"
SECRET_KEY = "vKLvDUP50tyLqA1e"
MERCHANT_ID = "315325"

# URLs الخاص بـ API
API_BASE_URL_STAGING = "https://bbapi.ocstaging.net/integration"
API_BASE_URL_PRODUCTION = "https://apis.bitaqatybusiness.com/integration"

# استخدام بيئة التطوير (Staging) حالياً
CURRENT_ENV = "staging"
API_BASE_URL = API_BASE_URL_STAGING if CURRENT_ENV == "staging" else API_BASE_URL_PRODUCTION

# ==================== إعدادات Flask ====================
SECRET_KEY_FLASK = "your-secret-key-for-flask-session"
DEBUG = True
TESTING = False

# ==================== إعدادات قاعدة البيانات ====================
SQLALCHEMY_DATABASE_URI = "sqlite:///app.db"
SQLALCHEMY_TRACK_MODIFICATIONS = False

# ==================== رموز المنتجات المراد احضارها ====================
PRODUCT_CODES = [
    "9117","9118","9119","9120","7894","7895","7896","7897","7898","7899","7900","8200","8201","8202","8203","8204","8205","8206",
    "7915","7916","7917","7918","7919","7920","7921","7901","7902","7903","7904","7905","7906","7907","8193","8194","8195","8196",
    "8197","8198","8199","7922","7923","7924","7925","7926","7927","7928","7908","7909","7910","7911","7912","7913","7914","7887",
    "7888","7889","7890","7891","7892","7893","5362","5363","5364","5365","5372","8286","8287","8288","8289","8290","8291","8292",
    "8293","8294","5535","5536","5537","8269","8270","8271","8272","8273","8274","8275","8276","8277","8278","8279","8280","5573",
    "6811","6812","8035","8036","6290","7048","7049","7050","7051","7052","7684","7685","8573","8575","8576","8574","6800","6801",
    "6802","6803","6804","6805","6806","6807","6808","6809","3633","3634","3644","3648","3649","5396","6993","6994","7133","7134",
    "7216","7217","7218","7219","7220","7221","7222","7223","7224","7225","7226","8302","8303","8304","8305","8306","6408","6409",
    "6861","6862","6863","8307","8308","8309","8310","8311","9110","9108","9111","6186","6188","6189","6238","6348","6349","6350",
    "6351","6352","6353","6354","6368","6369","6658","7114","7115","7123","7124","7125","7126","7478","7479","7056","7057","7058",
    "7059","7060","7769","7770","8141","8142","8530","6682","6683","6684","6685","6724","7971","6931","6932","6933","6934","6935",
    "6922","6923","6924","6925","7771","6751","6752","6753","6754","6755","7301","7302","7303","7304","4238","4239","4240","4241",
    "7032","5083","5084","5085","5086","5087","5734","6076","6337","6342","6548","6553","7263","7264","7265","7266","7998","8000",
    "8001","8003","8004","8411","8412","8413","8414","8415","8416","8417","8418","8419","8420","8421","8422","8423","8424","8425",
    "8426","8427","8428","8429","8430","8431","8432","8433","8434","8435","8436","8437","8438","8439","8440","8441","8442","8443",
    "8444","8445","8446","8447","8448","8449","8450","8451","8452","8453","8454","8455","8456","8457","8458","8459","8460","8570",
    "8571","8665","9107","8664","8572","8667","5161","5162","5163","5164","5403","5428","6239","6240","6241","6242","6243","6244",
    "6245","6246","6247","6248","6976","6977","6978","6979","6980","6981","6492","6493","6494","6495","6385","6386","6387","6388",
    "6389","4652","4653","4655","4656","6499","6500","6501","4779","4780","5540","6537","6538","7135","7136","6968","6969","6970",
    "6971","6972","6973","6974","6975","6403","6404","6405","4564","4564","4565","4566","4567","5735","5736","5737","5738","6562",
    "6563","5407","5408","5409","5410","5411","5489","5490","5491","5492","5494","5495","5496","8228","8229","8230","8231","8232",
    "5112","5113","5114","5115","5116","5117","5118","6782","6783","6784","6785","6786","6787","6788","6789","7071","7072","7073",
    "7074","8786","8787","8785","8784","8783","9124","9121","9122","9123","5243","5244","4424","4425","4426","4427","2937","2938",
    "2939","2940","2941","2942","2943","2541","2542","2543","2544","3070","3428","5140","7929","7930","7931","7932","7933","7934",
    "7935","7936","7937","7938","5528","5529","7204","7205","7206","7207","7208","7229","7869","7870","7871","2319","2320","4356",
    "4357","4358","4359","5057","7949","7950","7951","7952","7953","7954","7955","7956","7957","7958","7002","7003","7004","7005",
    "7006","7007","7008","7009","7010","7011","9115","9116","9114","9113","8974","8973","8972","8971","8728","8727","7939","7940",
    "7941","7942","7943","7944","7945","7946","7947","7948","8246","8247","8248","8249","8250","8251","8252","8253","8319","8320",
    "8321","8322","8323","8324","8325","5460","5461","7014","7015","7016","7017","7018","7019","7020","7021","7022","7023","7024",
    "7025","7116","7117","7118","7119","8343","8344","8345","8346","8347","8348","8349"
]

# ==================== دوال مساعدة ====================

def generate_password(text):
    """
    تولد كلمة المرور MD5 المطلوبة للتواصل مع API
    
    المعادلة:
    password = MD5(resellerUsername + secretKey)
    أو
    password = MD5(resellerUsername + productId + secretKey)
    أو
    password = MD5(resellerUsername + resellerRefNumber + secretKey)
    
    Args:
        text: النص المراد تحويله إلى MD5
        
    Returns:
        str: كلمة المرور المشفرة بـ MD5
    """
    return hashlib.md5(text.encode()).hexdigest()

def get_check_balance_password():
    """احسب كلمة المرور لطلب فحص الرصيد"""
    return generate_password(RESELLER_USERNAME + SECRET_KEY)

def get_product_password(product_id):
    """احسب كلمة المرور لطلب معلومات المنتج"""
    return generate_password(RESELLER_USERNAME + str(product_id) + SECRET_KEY)

def get_purchase_password(reseller_ref_number):
    """احسب كلمة المرور لطلب الشراء"""
    return generate_password(RESELLER_USERNAME + str(reseller_ref_number) + SECRET_KEY)

def get_bill_inquire_password(product_id):
    """احسب كلمة المرور لاستعلام الفاتورة"""
    return generate_password(RESELLER_USERNAME + str(product_id) + SECRET_KEY)

def get_topup_password(product_id):
    """احسب كلمة المرور لطلب الأعلى السعر"""
    return generate_password(RESELLER_USERNAME + str(product_id) + SECRET_KEY)
